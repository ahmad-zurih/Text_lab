#!/usr/bin/env bash

# Hard-code the container path:
ROOT_DIR="/storage/research/dsl_shared/solutions/ondemand/text_lab"
CONT_ROOT_DIR="/text_lab"
CONTAINER="$ROOT_DIR/container/text_lab.sif"




pushd "${PWD}"


apptainer exec --nv --bind $ROOT_DIR:$CONT_ROOT_DIR $CONTAINER \
  streamlit run $CONT_ROOT_DIR/src/app.py \
    --server.port "$SERVER_PORT" \
    --server.baseUrlPath "$SERVER_BASEURLPATH" \
    --server.enableCORS false \
    --server.headless true \
    --server.maxUploadSize=500

popd